(function(e,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(require("vue")):typeof define=="function"&&define.amd?define(["vue"],d):(e=typeof globalThis<"u"?globalThis:e||self,e.transfer=d(e.Vue))})(this,function(e){"use strict";var d=(t=>(t.left="left",t.right="right",t))(d||{});const E={rightTitle:{type:String,default:"\u5DF2\u9009\u62E9"},data:{type:Array,default:()=>[]}};function I(t){const n=e.ref(t);function r(l){const c=l.target,o=parseInt(c.value);n.value=o}return[n,r]}function V(){const t=e.reactive({left:[],right:[]});function n(l,c){switch(l){case d.left:t.left.push(c);break;case d.right:t.right.push(c);break}}function r(l,c){switch(l){case d.left:t.left=t.left.filter(o=>o.id!==c);break;case d.right:t.right=t.right.filter(o=>o.id!==c);break}}return[t,n,r]}function $(t,n){const r=e.ref(t);function l(o){const a=r.value.map(s=>s.id),i=o.filter(s=>!a.includes(s.id)&&!s.disabled);r.value=[...r.value,...i],o.forEach(s=>{s.checked=!1}),n.left=[]}function c(o){r.value=r.value.filter(a=>o.every(i=>i.id!==a.id)),o.forEach(a=>{a.checked=!1}),n.right=[]}return[r,l,c]}function N(t,n,r,l){const c=e.computed(()=>t[n.value].title),o=e.computed(()=>{const{data:i}=t[n.value];return i.filter(s=>{if(!r.value.find(({id:p})=>p===s.id))return s})}),a=e.computed(()=>({left:!l.right.length,right:!l.left.length}));return{leftTitle:c,leftListData:o,transferButtonDisabled:a}}function R(){const t=e.ref();function n(r){t.value=r}return[t,n]}const T=["value"],L=e.defineComponent({__name:"Selector",props:{data:{type:Array,default:()=>[]}},emits:["selectChange"],setup(t,{emit:n}){const r=l=>{n("selectChange",l)};return(l,c)=>(e.openBlock(),e.createElementBlock("select",{onChange:c[0]||(c[0]=o=>r(o))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.data,(o,a)=>(e.openBlock(),e.createElementBlock("option",{value:a,key:a},e.toDisplayString(o),9,T))),128))],32))}}),_=(t,n)=>{const r=t.__vccOpts||t;for(const[l,c]of n)r[l]=c;return r},S=_(L,[["__file","E:/project/transfer/src/modules/transfer/components/Selector.vue"]]),A={class:"list-title"},j=e.defineComponent({__name:"ListTitle",props:{title:{type:String,default:""}},setup(t){return(n,r)=>(e.openBlock(),e.createElementBlock("div",A,e.toDisplayString(t.title),1))}}),ne="",u=_(j,[["__scopeId","data-v-db7d5d98"],["__file","E:/project/transfer/src/modules/transfer/components/ListTitle.vue"]]),w={class:"box button-group"},G=["disabled"],O=["disabled"],F=e.defineComponent({__name:"ButtonGroup",props:{rightButtonDisabled:{type:Boolean,default:!0},leftButtonDisabled:{type:Boolean,default:!0}},emits:["leftButtonClick","rightButtonClick"],setup(t,{emit:n}){const r=()=>{n("leftButtonClick")},l=()=>{n("rightButtonClick")};return(c,o)=>(e.openBlock(),e.createElementBlock("div",w,[e.createElementVNode("button",{disabled:t.leftButtonDisabled,class:"left",onClick:r}," < ",8,G),e.createElementVNode("button",{disabled:t.rightButtonDisabled,class:"right",onClick:l}," > ",8,O)]))}}),re="",H=_(F,[["__scopeId","data-v-cee554fe"],["__file","E:/project/transfer/src/modules/transfer/components/ButtonGroup.vue"]]),M=["draggable","onDragstart"],P=["id","disabled","onUpdate:modelValue","onClick"],U=["for"],q=e.defineComponent({__name:"ListItem",props:{data:{type:Array,default:()=>[]},leftOrRight:{type:String,default:d.left,validator:t=>[d.left,d.right].includes(t)}},emits:["dragItem","setCheckedData","removeCheckedData"],setup(t,{emit:n}){const r=(c,o,a)=>{const s=c.target.checked;a.checked=s,s?n("setCheckedData",o,a):n("removeCheckedData",o,a.id)},l=c=>{n("dragItem",c)};return(c,o)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.data,(a,i)=>(e.openBlock(),e.createElementBlock("div",{key:a.id,class:e.normalizeClass(["list-item",a.disabled?"disabled":""]),draggable:!a.disabled,onDragstart:s=>l(a)},[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:`__checkbox__${a.id}`,disabled:a.disabled,draggable:"true","onUpdate:modelValue":s=>a.checked=s,onClick:s=>r(s,t.leftOrRight,a)},null,8,P),[[e.vModelCheckbox,a.checked]]),e.createElementVNode("label",{for:`__checkbox__${a.id}`},e.toDisplayString(a.name),9,U)],42,M))),128))}}),oe="",k=_(q,[["__scopeId","data-v-4cc3fad3"],["__file","E:/project/transfer/src/modules/transfer/components/ListItem.vue"]]),z={class:"checkeAll"},J=e.defineComponent({__name:"CheckedAll",props:{leftOrRight:{type:String,default:d.left,validator:t=>[d.left,d.right].includes(t)},data:{type:Array,default:()=>[]}},emits:["setCheckedData","removeCheckedData"],setup(t,{emit:n}){const r=t,l=e.ref(null),c=o=>{const{checked:a}=o.target;a?r.data.forEach(i=>{i.checked=!0,n("setCheckedData",r.leftOrRight,i)}):r.data.forEach(i=>{i.checked=!1,n("setCheckedData",r.leftOrRight,i)})};return e.watchEffect(()=>{r.data.length&&r.data.every(o=>o.checked)?e.nextTick(()=>{console.log(l,"checkBoxRef"),l.value.checked=!0}):(console.log(l),e.nextTick(()=>{l.value.checked=!1}))}),(o,a)=>(e.openBlock(),e.createElementBlock("span",z,[e.createElementVNode("input",{ref_key:"checkBoxRef",ref:l,id:"checkAll",type:"checkbox",onClick:c},null,512)]))}}),ae="",m=_(J,[["__scopeId","data-v-75494384"],["__file","E:/project/transfer/src/modules/transfer/components/CheckedAll.vue"]]),K={class:"transfer"},Q={class:"list-header"},W={class:"list-header"},X=e.defineComponent({__name:"Transfer",props:E,setup(t){const n=t,r=n.data.map(h=>h.title),[l,c]=I(0),[o,a,i]=V(),[s,p,D]=$([],o),Y=n.data.map(({data:h})=>h).flat();o.left=Y.filter(h=>h.checked);const{leftTitle:Z,leftListData:b,transferButtonDisabled:B}=N(n.data,l,s,o),[y,v]=R(),x={setCheckedData:a,removeCheckedData:i,dragItem:v},ee=e.ref(),te=e.ref();return(h,f)=>(e.openBlock(),e.createElementBlock("div",null,[e.createVNode(S,{data:e.unref(r),onSelectChange:e.unref(c)},null,8,["data","onSelectChange"]),e.createElementVNode("div",K,[e.createElementVNode("div",{class:"box left-list",onDragover:f[0]||(f[0]=e.withModifiers(()=>{},["prevent"])),onDrop:f[1]||(f[1]=g=>e.unref(D)([e.unref(y)]))},[e.createElementVNode("div",Q,[e.createVNode(m,{ref_key:"leftCheckAllRef",ref:ee,"left-or-right":e.unref(d).left,data:e.unref(b),onSetCheckedData:e.unref(a),onRemoveCheckedData:e.unref(i)},null,8,["left-or-right","data","onSetCheckedData","onRemoveCheckedData"]),e.createVNode(u,{title:e.unref(Z)},null,8,["title"])]),e.createElementVNode("div",null,[e.createVNode(k,e.mergeProps({data:e.unref(b),"left-or-right":e.unref(d).left},e.toHandlers(x)),null,16,["data","left-or-right"])])],32),e.createVNode(H,{"left-button-disabled":e.unref(B).left,"right-button-disabled":e.unref(B).right,onLeftButtonClick:f[2]||(f[2]=g=>e.unref(D)(e.unref(o).right)),onRightButtonClick:f[3]||(f[3]=g=>e.unref(p)(e.unref(o).left))},null,8,["left-button-disabled","right-button-disabled"]),e.createElementVNode("div",{class:"box right-list",onDragover:f[4]||(f[4]=e.withModifiers(()=>{},["prevent"])),onDrop:f[5]||(f[5]=g=>e.unref(p)([e.unref(y)]))},[e.createElementVNode("div",W,[e.createVNode(m,{ref_key:"rightCheckAllRef",ref:te,onSetCheckedData:e.unref(a),onRemoveCheckedData:e.unref(i),"left-or-right":e.unref(d).right,data:e.unref(s)},null,8,["onSetCheckedData","onRemoveCheckedData","left-or-right","data"]),e.createVNode(u,{title:h.rightTitle},null,8,["title"])]),e.createElementVNode("div",null,[e.createVNode(k,e.mergeProps({data:e.unref(s),"left-or-right":e.unref(d).right},e.toHandlers(x)),null,16,["data","left-or-right"])])],32)])]))}}),le="",C={Transfer:_(X,[["__scopeId","data-v-777fe02b"],["__file","E:/project/transfer/src/modules/transfer/Transfer.vue"]])};return{install(t){for(let n in C)t.component(n,C[n])}}});
